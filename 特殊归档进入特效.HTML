<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Special Archive | DeepWhite</title>
    <style>
      
        :root {
            /* 颜色变量 (适配米白主题) */
            --bg-color: #f4f4f0;
            
            --color-text: #1a1a1a;          /* 主要文字 */
            --color-text-strong: #000000;   /* 强调文字/按钮背景 */
            --color-text-subtle: #666666;   /* 次要文字 */
            
            --color-background: #ffffff;    /* 卡片背景/按钮文字 */
            --color-border: #d1d1d1;        /* 边框颜色 */
            --color-meta: #888888;          /* Meta信息颜色 */
            
            --measure-reading: 65ch;        /* 阅读宽度限制 */
            
            /* 动画曲线 */
            --ease: cubic-bezier(0.25, 1, 0.5, 1);
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--color-text);
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Helvetica Neue", sans-serif;
            /* 初始禁止滚动，等待开场动画 */
            overflow-x: hidden;
        }

        body.is-loading {
            overflow: hidden;
        }

        /* =========================================
           1. 粒子动画层 & 内容包裹层
           ========================================= */
        
        /* 粒子画布：放在最顶层 */
        #particle-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            pointer-events: none; /* 允许点击穿透，但在动画期间body无法操作 */
        }

        /* 主内容包裹层：初始隐藏，向下偏移 */
        #main-wrapper {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1s ease, transform 1s var(--ease);
            /* 给整个页面加一些边距 */
            padding: 80px 20px;
            max-width: 1000px;
            margin: 0 auto;
        }

        /* 激活状态：优雅浮现 */
        #main-wrapper.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* =========================================
           2. 你的原始 CSS (Special Archive)
           ========================================= */
        .special-archive {
            display: flex;
            flex-direction: column;
            gap: 32px;
        }
        .special-archive-header {
            display: flex;
            flex-direction: column;
            gap: 12px;
            /* 增加下划线分隔，增强视觉层级 */
            border-bottom: 1px solid var(--color-border);
            padding-bottom: 40px;
            margin-bottom: 20px;
        }
        .special-archive-title {
            margin: 0;
            font-size: 28px; /* 根据需要可以调大，比如 60px */
            letter-spacing: 0.08em;
            text-transform: uppercase;
            font-weight: 200;
        }
        .special-archive-lede {
            margin: 0;
            color: var(--color-text-subtle);
            max-width: var(--measure-reading);
            line-height: 1.6;
        }
        .special-archive-list {
            list-style: none;
            padding: 0;
            margin: 0;
            /* 改为 Grid 布局以适应宽屏，或者保持 Flex column */
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 24px;
        }
        .special-archive-card {
            border: 1px solid var(--color-border);
            border-radius: 28px;
            padding: 28px;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 20px 45px rgba(15, 15, 15, 0.08);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            display: flex;
            flex-direction: column;
        }
        .special-archive-card:hover,
        .special-archive-card:focus-within {
            transform: translateY(-4px);
            box-shadow: 0 30px 60px rgba(15, 15, 15, 0.12);
        }
        .special-archive-meta {
            font-size: 13px;
            color: var(--color-meta);
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-bottom: 12px;
        }
        .special-archive-card-title {
            margin: 0 0 12px;
            font-size: 24px;
            font-weight: 500;
        }
        .special-archive-card-title a {
            border-bottom: none;
            text-decoration: none;
            color: inherit;
        }
        .special-archive-card-summary {
            margin: 0;
            color: var(--color-text-subtle);
            line-height: 1.6;
            flex-grow: 1; /* 让按钮对齐底部 */
        }
        .special-archive-card-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 18px;
        }
        .special-archive-tag {
            font-size: 12px;
            letter-spacing: 0.08em;
            border: 1px solid var(--color-border);
            border-radius: 999px;
            padding: 4px 12px;
            text-transform: uppercase;
            color: var(--color-text);
        }
        .special-archive-card-cta {
            margin-top: 22px;
        }
        .special-archive-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            border: none;
            border-bottom: none;
            border-radius: 999px;
            padding: 10px 18px;
            background: var(--color-text-strong);
            color: var(--color-background);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            font-size: 12px;
            transition: text-shadow 0.2s ease;
            text-decoration: none;
            cursor: pointer;
        }
        .special-archive-link:hover,
        .special-archive-link:focus-visible {
            color: var(--color-background);
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.55);
        }
        .special-archive-link::after {
            content: "↗";
            font-size: 14px;
        }
        .special-archive-empty {
            color: var(--color-text-subtle);
        }

        @media (max-width: 640px) {
            .special-archive-card {
                padding: 22px;
            }
            .special-archive-card-title {
                font-size: 20px;
            }
            .special-archive-list {
                grid-template-columns: 1fr;
            }
            .special-archive-link {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body class="is-loading">

    <!-- 1. 粒子画布 -->
    <canvas id="particle-layer"></canvas>

    <!-- 2. 内容包裹层 -->
    <div id="main-wrapper">
        <section class="special-archive">
            <header class="special-archive-header">
                <p class="special-archive-title">Special Archive</p>
                <p class="special-archive-lede">
                    这里收录的是完全不遵循常规模板的页面。让页面 front matter 添加
                    <code>tags: ['special-archive']</code> 即会自动出现在此处；
                    这是一个关于打破常规、探索交互边界的集合。
                </p>
            </header>

            <ul class="special-archive-list">
                <!-- 模拟卡片 1 -->
                <li class="special-archive-card">
                    <div class="special-archive-meta">
                        <time datetime="2025-11-29">2025年11月29日</time>
                        <span>EXPERIMENTAL</span>
                    </div>
                    <h2 class="special-archive-card-title">
                        <a href="#">Gravity Playground</a>
                    </h2>
                    <p class="special-archive-card-summary">
                        引入 Matter.js 物理引擎，让 HTML 元素受重力影响。支持拖拽投掷与失重模式，探索网页元素的实体化交互。
                    </p>
                    <div class="special-archive-card-tags">
                        <span class="special-archive-tag">PHYSICS</span>
                        <span class="special-archive-tag">INTERACTION</span>
                    </div>
                    <div class="special-archive-card-cta">
                        <a class="special-archive-link" href="#">进入页面</a>
                    </div>
                </li>

                <!-- 模拟卡片 2 -->
                <li class="special-archive-card">
                    <div class="special-archive-meta">
                        <time datetime="2025-10-15">2025年10月15日</time>
                        <span>VISUAL</span>
                    </div>
                    <h2 class="special-archive-card-title">
                        <a href="#">Quantum Particles</a>
                    </h2>
                    <p class="special-archive-card-summary">
                        基于 Canvas 的粒子系统。模拟量子纠缠效果，支持鼠标斥力场、神经网络连线以及点击冲击波反馈。
                    </p>
                    <div class="special-archive-card-tags">
                        <span class="special-archive-tag">WEBGL</span>
                        <span class="special-archive-tag">ART</span>
                    </div>
                    <div class="special-archive-card-cta">
                        <a class="special-archive-link" href="#">进入页面</a>
                    </div>
                </li>

                <!-- 模拟卡片 3 -->
                <li class="special-archive-card">
                    <div class="special-archive-meta">
                        <time datetime="2025-09-01">2025年09月01日</time>
                        <span>SYSTEM</span>
                    </div>
                    <h2 class="special-archive-card-title">
                        <a href="#">Grid Contact Hub</a>
                    </h2>
                    <p class="special-archive-card-summary">
                        一套基于 CSS Grid 的模块化联系方式组件。包含抽屉式展开、自适应布局及微交互动画，完美适配深色与浅色模式。
                    </p>
                    <div class="special-archive-card-tags">
                        <span class="special-archive-tag">UI/UX</span>
                        <span class="special-archive-tag">LAYOUT</span>
                    </div>
                    <div class="special-archive-card-cta">
                        <a class="special-archive-link" href="#">进入页面</a>
                    </div>
                </li>
            </ul>
        </section>
    </div>

    <!-- 3. 动画逻辑 -->
    <script>
        (function() {
            const canvas = document.getElementById('particle-layer');
            const ctx = canvas.getContext('2d');
            const mainWrapper = document.getElementById('main-wrapper');

            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            let particles = [];
            let animationId;
            let phase = 'gathering'; // 状态：gathering(汇聚) -> holding(展示) -> exploding(消失)

            // 配置字体大小
            let fontSize = Math.min(window.innerWidth / 10, 100);
            
            // 样式配置：使用墨黑色粒子
            ctx.fillStyle = '#1a1a1a';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.font = `800 ${fontSize}px -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif`;

            // 粒子类定义
            class Particle {
                constructor(targetX, targetY) {
                    this.targetX = targetX;
                    this.targetY = targetY;
                    
                    // 初始位置：从屏幕外随机飞入
                    const side = Math.floor(Math.random() * 4); // 0:top, 1:right, 2:bottom, 3:left
                    if(side === 0) { this.x = Math.random() * canvas.width; this.y = -100; }
                    else if(side === 1) { this.x = canvas.width + 100; this.y = Math.random() * canvas.height; }
                    else if(side === 2) { this.x = Math.random() * canvas.width; this.y = canvas.height + 100; }
                    else { this.x = -100; this.y = Math.random() * canvas.height; }

                    this.size = 1.5;
                    this.ease = 0.05 + Math.random() * 0.05; // 汇聚速度系数
                    
                    // 爆炸时的随机速度
                    this.vx = (Math.random() - 0.5) * 15;
                    this.vy = (Math.random() - 0.5) * 15;
                    
                    this.alpha = 1;
                }

                update() {
                    if (phase === 'gathering' || phase === 'holding') {
                        // 飞向目标文字位置
                        this.x += (this.targetX - this.x) * this.ease;
                        this.y += (this.targetY - this.y) * this.ease;
                    } else if (phase === 'exploding') {
                        // 炸开
                        this.x += this.vx;
                        this.y += this.vy;
                        this.alpha -= 0.03; // 逐渐消失
                    }
                }

                draw() {
                    if (this.alpha <= 0) return;
                    ctx.globalAlpha = this.alpha;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
                    ctx.fill();
                    ctx.globalAlpha = 1;
                }
            }

            // 初始化：扫描 "Special DeepWhite"
            function init() {
                // 1. 画字
                ctx.fillText('Special DeepWhite', canvas.width/2, canvas.height/2);
                
                // 2. 扫描像素
                const data = ctx.getImageData(0, 0, canvas.width, canvas.height);
                let gap = 4; // 桌面端间隔
                if (canvas.width < 768) gap = 3; // 移动端间隔更密，因为字小

                particles = [];
                for (let y = 0; y < data.height; y += gap) {
                    for (let x = 0; x < data.width; x += gap) {
                        // 扫描非透明像素
                        if (data.data[(y * 4 * data.width) + (x * 4) + 3] > 128) {
                            particles.push(new Particle(x, y));
                        }
                    }
                }
            }

            // 动画循环
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                let active = false;
                particles.forEach(p => {
                    p.update();
                    p.draw();
                    if (p.alpha > 0) active = true;
                });

                // 如果爆炸结束且所有粒子不可见，停止循环并隐藏 canvas
                if (phase === 'exploding' && !active) {
                    cancelAnimationFrame(animationId);
                    canvas.style.display = 'none';
                    return;
                }
                
                animationId = requestAnimationFrame(animate);
            }

            // --- 执行时间轴 ---
            init();
            animate();

            // 1.2秒后：进入停顿展示期
            setTimeout(() => {
                phase = 'holding';
            }, 1200);

            // 2.5秒后：粒子炸开，网页内容浮现
            setTimeout(() => {
                phase = 'exploding';
                
                // 移除 body 的 overflow: hidden
                document.body.classList.remove('is-loading');
                
                // 显示主内容
                mainWrapper.classList.add('visible');
            }, 2500);

            // 窗口大小改变简单的重置
            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });

        })();
    </script>
</body>
</html>