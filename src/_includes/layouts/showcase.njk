<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% set assetsConfig = assets or {} %}
    {% set pageTitle = title or metadata.title or '[SHOWCASE]' %}
    <title>{{ pageTitle }}</title>
    {% if assetsConfig.mainCssHref %}
    <link rel="stylesheet" href="{{ assetsConfig.mainCssHref | url }}">
    {% endif %}
    {% for cssFile in extraCss | toArray %}
    {% set versionSuffix = assetsConfig.assetVersionSuffix | default("") %}
    <link rel="stylesheet" href="{{ (cssFile + versionSuffix) | url }}">
    {% endfor %}
    {%- set pageTags = tags | default([]) | toArray -%}
    {%- set entryAnimation = entryAnimation | default(false) -%}
    {%- set hasSpecialArchiveTag = 'special-archive' in pageTags -%}
    {%- set shouldShowEntryAnimation = entryAnimation or hasSpecialArchiveTag -%}
    {%- if shouldShowEntryAnimation -%}
    {% set versionSuffix = assetsConfig.assetVersionSuffix | default("") %}
    <link rel="stylesheet" href="{{ ('/css/special-archive-entry.css' + versionSuffix) | url }}">
    {%- endif -%}
    {{ head | safe }}
</head>
<body class="{{ bodyClass | default('showcase-body') }}{% if shouldShowEntryAnimation %} is-loading{% endif %}">
    {%- if shouldShowEntryAnimation -%}
    <!-- 粒子画布 -->
    <canvas id="particle-layer"></canvas>
    <!-- 内容包裹层 -->
    <div id="main-wrapper">
    {%- endif -%}
    {{ content | safe }}
    {%- if shouldShowEntryAnimation -%}
    </div>
    <!-- 结束内容包裹层 -->
    {%- endif -%}
    {% for scriptFile in extraJs | toArray %}
    <script src="{{ scriptFile | url }}" defer></script>
    {% endfor %}
    {% set requestedIslands = islands | toArray %}
    {% if requestedIslands | length %}
        {% for islandName in requestedIslands %}
            {% set islandRegistry = assetsConfig.islands or {} %}
            {% set island = islandRegistry[islandName] %}
            {% if island %}
<script {% if island.module %}type="module"{% endif %} src="{{ island.src | url }}" defer></script>
            {% endif %}
        {% endfor %}
    {% endif %}
    {%- if shouldShowEntryAnimation -%}
    {% set versionSuffix = assetsConfig.assetVersionSuffix | default("") %}
    <script src="{{ ('/js/special-archive-entry.js' + versionSuffix) | url }}"></script>
    {%- endif -%}
</body>
</html>


